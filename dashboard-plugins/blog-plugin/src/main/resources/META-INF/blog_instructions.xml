<?xml version="1.0" encoding="UTF-8"?>
<instructions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://www.onehippo.org/essentials/instructions /instructions.xsd" xmlns="http://www.onehippo.org/essentials/instructions">
  <!--
    DOCUMENT TYPES REGISTRATION
  -->
  <instructionSet>
    <!-- cnd-->
    <cnd documentType="blogpost" superType="{{namespace}}:basedocument,hippostd:relaxed,hippotranslation:translated"/>
    <cnd documentType="author" superType="{{namespace}}:basedocument,hippostd:relaxed,hippotranslation:translated"/>
    <cnd documentType="account" superType="hippo:compound,hippostd:relaxed"/>
    <!-- templates-->
    <xml action="copy" source="xml/namespaces/blogpost.xml" target="/hippo:namespaces/{{namespace}}"/>
    <xml action="copy" source="xml/namespaces/author.xml" target="/hippo:namespaces/{{namespace}}"/>
    <xml action="copy" source="xml/namespaces/account.xml" target="/hippo:namespaces/{{namespace}}"/>
    <!-- beans-->
    <file action="copy" overwrite="false" source="java/Author.txt" target="{{beansFolder}}/Author.java"/>
    <file action="copy" overwrite="false" source="java/Blogpost.txt" target="{{beansFolder}}/Blogpost.java"/>
    <file action="copy" overwrite="false" source="java/Account.txt" target="{{beansFolder}}/Account.java"/>
  </instructionSet>
  <!--
    COMPONENTS
  -->

  <!--
    CREATE FOLDER QUERIES
  -->
  <instructionSet>
    <xml action="copy" source="xml/folderoptions/new-blog-folder.xml" target="/hippo:configuration/hippo:queries/hippo:templates"/>
    <xml action="copy" source="xml/folderoptions/new-blog-document.xml" target="/hippo:configuration/hippo:queries/hippo:templates"/>

    <xml action="copy" source="xml/folderoptions/new-blogauthor-folder.xml" target="/hippo:configuration/hippo:queries/hippo:templates"/>
    <xml action="copy" source="xml/folderoptions/new-blogauthor-document.xml" target="/hippo:configuration/hippo:queries/hippo:templates"/>
  </instructionSet>
  <!--
    CREATE DATA FOLDERS
  -->
  <instructionSet>
    <folder path="/content/documents/administration" template="xml/folder/administration_folder.xml"/>
    <folder path="/content/documents/{{namespace}}/blog/authors" template="xml/folder/blog_author_folder.xml"/>
    <folder path="/content/documents/{{namespace}}/blog/{{dateRepoYearMonth}}" template="xml/folder/blog_folder.xml"/>
  </instructionSet>
  <!--
    DATA
  -->

  <instructionSet>
    <xml action="copy" overwrite="false" source="xml/data/account-types.xml" target="/content/documents/administration"/>
    <xml action="copy" overwrite="false" source="xml/data/blog-categories.xml" target="/content/documents/administration"/>

  </instructionSet>

  <!--
    SAMPLE DATA
  -->
    <instructionSet>
      <xml action="copy" overwrite="false" source="xml/samples/author_1.xml" target="/content/documents/{{namespace}}/blog/authors"/>
      <xml action="copy" overwrite="false" source="xml/samples/author_2.xml" target="/content/documents/{{namespace}}/blog/authors"/>
      <xml action="copy" source="xml/samples/blog_entry_1.xml" target="/content/documents/{{namespace}}/blog/{{dateRepoYearMonth}}"/>
      <xml action="copy" source="xml/samples/blog_entry_2.xml" target="/content/documents/{{namespace}}/blog/{{dateRepoYearMonth}}"/>
    </instructionSet>

  <!--
    JSP TEMPLATES
  -->
  <instructionSet group="jsp">
    <file action="copy" overwrite="true" source="jsp/essentials-blog-detail.jsp" target="{{jspRoot}}/essentials/blog/essentials-blog-detail.jsp"/>
    <file action="copy" overwrite="true" source="jsp/essentials-blog-list.jsp" target="{{jspRoot}}/essentials/blog/essentials-blog-list.jsp"/>
  </instructionSet>
  <!--
    FREEMARKER TEMPLATES
  -->
  <instructionSet group="freemarker">
    <file action="copy" overwrite="true" source="freemarker/essentials-blog-detail.ftl" target="{{jspRoot}}/essentials/blog/essentials-blog-detail.ftl"/>
    <file action="copy" overwrite="true" source="freemarker/essentials-blog-list.ftl" target="{{jspRoot}}/essentials/blog/essentials-blog-list.ftl"/>
  </instructionSet>
  <!--
    FACET
  -->
  <instructionSet>
    <execute class="org.onehippo.cms7.essentials.dashboard.blog.FacetInstruction"/>
  </instructionSet>

</instructions>