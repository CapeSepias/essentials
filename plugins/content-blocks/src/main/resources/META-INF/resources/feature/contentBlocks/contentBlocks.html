<!--
  Copyright 2014 Hippo B.V. (http://www.onehippo.com)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  -->

<div class="panel panel-default" ng-controller="contentBlocksCtrl">
  <div class="panel-heading"><h3>Content Blocks</h3></div>
  <div class="panel-body">
    <p>The Content Blocks feature provides support for adding <em>content blocks fields</em> to your document types.
      A content block field is a collection of different (potentially complex) field types from which the content
      authors may choose.
    </p>
    <p>This configuration screen allows you to add new content blocks field to your document types. You can also
      modify (or delete) existing content blocks fields.
    </p>
    <p>When you create a new content blocks field, it will be created at the default location for new fields.
      You can move the content blocks field to the desired position in the CMS Document Type Editor. You can
      click on the document type's link to get there. Make sure you commit all changes before coming back to
      the setup application.
    </p>
    <p class="alert alert-info">Note that adding a new content blocks field to a document type will require an
      update of the corresponding content bean. The BeanWriter tool is currently not capable of dealing with
      content blocks fields correctly, so you'll need to do this manually, in your project sources.
    </p>
    <p>You can find more detailed documentation for the
      <a target="_blank" href="http://content-blocks.forge.onehippo.org">Content Blocks plugin in the Hippo Forge</a>.
    </p>

    <h4>Edit your Content Blocks Fields</h4>
    <div ng-hide="documentTypes.length > 0" class="alert alert-warning">
      <p>You appear not to have any editable document types in your project yet. In order to create content blocks fields,
        you first need to have document types. Either install features that provide a document type, or create some
        in the CMS Document Type Editor.
      </p>
    </div>
    <form ng-show="documentTypes.length > 0" class="form-horizontal" novalidate name="contentBlocksForm">
      <div class="form-group">
        <label class="col-sm-4 control-label">Document Type:</label>
        <div class="col-sm-8">
          <select name="documentType" required hippo.theme.select-box
                  class="form-control"
                  ng-model="selectedDocumentType"
                  ng-selected="selectedDocumentType"
                  ng-options="type.name for type in editable"
                  data-options="editable"
                  data-placeholder="Choose a document type...">
          </select>
        </div>
      </div>

      <!--Document type-specific part-->
      <div ng-show="selectedDocumentType">
        Here comes the document type specific part: A list of existing content blocks fields, where you can
        edit the content blocks (also the name?), or which you can delete. Then, there's a form group to create
        a new field (name) with associated content blocks. Do we want to support copying an existing field from
        the same or another document type? Would be nice!
      </div>

      <div class="pull-right">
        <button class="btn btn-primary" ng-click="update()">Save Changes</button>
      </div>
      <p class="clearfix">&nbsp;</p>
    </form>
  </div>
</div>


